# HTTPS&HTTP/2.0归纳

### HTTPS

HTTPS = HTTP + SSL

首先简单介绍一下SSL相关的概念。



### SSL

SSL(Secure Sockets Layer 安全套接层),及其继任者传输层安全（Transport Layer Security，TLS）是为网络通信提供安全及数据完整性的一种安全协议。TLS与SSL在**传输层与应用层之间**对网络连接进行加密。

SSL协议可分为两部分，按照先后顺序：

* SSL握手协议，用于身份验证、交换密钥等。
* SSL记录协议，用于数据压缩、加密等。



通过使用SSL，HTTPS具有加密（防窃听）、认证（防伪装）和完整性保护（防篡改）。

* 加密
  * HTTPS采取混合加密机制。
    * 对文档用对称密钥加/解密。
    * 问题在于发送方如何将该对称密钥安全地传输给接收方。这里就用到了非对称密钥加密。即发送方用接收方提供的公钥加密这个对称密钥，然后接收方用私钥解密得到对称密钥，从而可以解密文档。
* 认证
  * 使用CA证书的数字签名。
    * 服务器对上面加密用到的公开密钥进行签名（即用另一个私钥加密）得到数字证书，然后将公开密钥一同发送回客户端。客户端验证签名（即用另一个配套的公钥解密），比较解密后的结果和接收的结果是否一致。一致说明验证通过。
* 完整性
  * 使用报文摘要，即计算报文的Hash值。
    * 即便篡改了加密后的报文，那么它解密后肯定就不是原来的内容，得到的Hash值肯定也会变。如果想要同时篡改Hash值的话需要得到原始报文，基本不可能因为原始报文加密了。这样一比较传输过来的Hash值和解密后重新计算的Hash值就知道传输过程中数据是否被恶意篡改。

HTTPS的缺点：

* 速度更慢，因为步骤更多。
* 证书授权需要额外费用，更贵。



### HTTP/2.0

特点：

* 二进制分帧层。就是将HTTP报文的首部和实体分开，得到HEADERS帧和DATA帧。传输的时候以帧为单位传输， 不同数据流的帧可以交错发送，然后会重新组装成完整的报文。
  * 优点是高效，支持资源优先级（先传输优先级高的）。
  * 交错发送可以降低延迟（类似于流水线）。
* 服务端推送。客户端请求html页面时，服务端会将html和相关的资源如js和css等文件一起发送回客户端。不需要再次发送请求。
  * 效率更高，延迟更低（减少了请求次数）。
* 首部压缩。通过首部字段表避免重复传输相同的首部，同时用Huffman编码压缩首部字段。
  * 降低网络数据流量，降低延迟。